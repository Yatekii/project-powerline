% **************************************************************************** %
\chapter{Hardware}
\label{chap:hardware}
% **************************************************************************** %

Das folgende Kapitel dokumentiert  unseren L\"osungsfindungsprozess im Bereich
Hardware. Zuerst  wird  auf  die  Problematik  der  Kommunikation  \"uber  die
DC-Leitung  zwischen  Solarmodul  und \Master  eingegangen. Es  werden  unsere
L\"osungsans\"atze erl\"autert  und auf St\"arken und  Schw\"achen untersucht,
um daraus anschliessend eine Entscheidung abzuleiten.

In   einem  n\"achsten   Schritt  werden   die  L\"osungskonzepte   f\"ur  die
Sensor-Platine und das \Master genauer erkl\"art.

\anweisung Verifizierbare  Angaben machen, nicht  allgemeine Floskeln. Zahlen,
Fakten,  theoretische Hintergrundinformationen,  daraus gezogene  Konsequenzen
etc. Bezug auf das Pflichtenheft, wo m\"oglich.

\anweisung Bilder, Diagramme, Formeln etc.


% ---------------------------------------------------------------------------- %
\section{Kommunikation \"uber DC-Leitung}
\label{sec:hardware:dcLeitung}
% ---------------------------------------------------------------------------- %

W\"ahrend  des   Projekts  wurden   zwei  L\"osungsans\"atze   untersucht,  um
ein  Signal  \"uber   die  Gleichstromleitung  vom  \Sensor   zum  \Master  zu
\"ubertragen. Der  Gleichstromanteil   bel\"auft  sich  in  der   Leitung  auf
ca. \SI{960}{\volt} \todo{Berechnung/Begr\"undung}.

\myfancybreak

\emph{Frequency-shift    keying}   (\emph{Frequenzumtastung}): Dem    in   der
Leitung    fliessenden    Gleichstrom     wird    ein    (verh\"altnism\"assig
kleines\todo{Amplitudenverh\"altnisse})    Wechselstromsignal    aufmoduliert,
welches   die   zu   \"ubertragenden   Informationen   enth\"alt. Dabei   wird
die    Frequenz   dieses    Wechselstromsignals    in   diskreten    Schritten
variiert,  \todo{korrekt?}   und  diese   \"Anderung  der  Frequenz   ist  der
Informationstr\"ager.  F\"ur einen kurzen \"Uberblick  zum Thema sie an dieser
Stelle auf Wikipedia verwiesen~\cite{ref:fsk:wikipedia}.

Das    Verfahren    ist   schematisch    in    Abbildung~\ref{fig:fsk:concept}
dargestellt.\todo{Achsen: Einheiten}

\begin{figure}[h!tb]
    \centering
    \input{images/python/fsk.pgf}
    \caption{%
        \emph{Frequency-shift  keying}: Oben   sind  die   zu  \"ubertragenden
        digitalen  Daten  als  \code{1}  und \code{0}  abgebildet,  unten  das
        zugeh\"orige Verhalten des  modulierten Signals. Dieses Signal w\"urde
        bei unserem System auf eine \SI{960}{\volt}-DC-Spannung aufmoduliert.%
    }
    \label{fig:fsk:concept}
\end{figure}

\myfancybreak

\emph{Amplitude-shift  keying}  (\emph{Amplitudenumtastung}): Statt  diskreten
Frequenzen werden in diesem  Fall diskrete Amplituden als Informationstr\"ager
benutzt. Die   Umsetzung    w\"urde   darauf   basieren,    dass   kurzfristig
(mit   Frequenzen   im  Bereich   von   einigen   Kilohertz)  ein   Solarmodul
\todo{Modul? Zelle? String?} in einem  String (Serieschaltung) kurzgeschlossen
w\"urde. Dies w\"urde die  auf der Leitung anliegende Spannung  in dieser Zeit
um  den Spannungsanteil  des kurzgeschlossenen  Moduls einbrechen  lassen. Die
Einbr\"uche  w\"urden  als  Informationstr\"ager   fungieren  und  im  \Master
ausgewertet.

Grunds\"atzlich handelt es  sich beim aufmodulierten Signal  um \emph{ASK} mit
zwei Amplituden: \SI{0}{\volt}  (wenn kein  Modul kurzgeschlossen ist  und ein
reiner Gleichstrom \"uber  die Leitung fliesst) und  einer negativen Amplitude
im Umfang der Spannung des kurzgeschlossenen Modules.

F\"ur  einen kurzen  Einblick ins  Thema  sei auch  an dieser  Stelle auf  den
entsprechenden Artikel auf Wikipedia verwiesen \cite{ref:ask:wikipedia}.

Abbildung~\ref{fig:ask:concept} stellt das  Konzept des Verfahrens schematisch
dar. \todo{Achsen: Einheiten}

\begin{figure}[h!tb]
    \centering
    \input{images/python/ask.pgf}
    \caption{%
        \emph{Amplitude-shift  keying}: Oben   sind  die   zu  \"ubertragenden
        digitalen  Daten  als  \code{1}  und \code{0}  abgebildet,  unten  das
        zugeh\"orige  Verhalten  des   \"ubertragenen  Signals. Die  Form  des
        Signals w\"urde  in unserem System  etwas anders aussehen, da  wir ein
        \SI{960}{\volt}-Signal  kurzzeitig um  jeweils  bis zu  \SI{60}{\volt}
        einbrechen lassen  w\"urden, anstatt mit  sch\"onen Sinus-Schwingungen
        zu arbeiten. Das  Konzept einer diskreten Anzahl  Frequenzen und ihrer
        Zuordnung zu entweder \code{0} oder \code{1} bleibt aber identisch.%
    }
    \label{fig:ask:concept}
\end{figure}
\todo{Verweis auf Simulationen}

Die  Implementierung   einer  FSK-L\"osung  ist  prinzipiell   dich  sicherere
Variante.  Fertige  Microchips, auf denen  man eine solche  Schaltung aufbauen
kann,  existieren  bereits  am  Markt. Die prim\"are  Schwierigkeit  liegt  in
der  Frage,  wie man  das  Signal  in  die DC-Leitung  einkoppelt. Wichtig  an
der  Einkopplung  ist,  dass  sie potentialgetrennt  von  der  DC-Leitung  ist
\todo{Korrekt? Begr\"undung?};  man kann  also  nicht  einfach die  DC-Leitung
mit   dem  Ausgang   des   Signalgebers  verbinden   \todo{Strom  geht   durch
Signalgeber? Spannung?} Daf\"ur bietet sich entweder eine kapazitive oder eine
induktive Einkopplung an \todo{Schaltungen}.

Ein  Modul kurzzuschliessen  und damit  eine  Form von  ASK zu  implementieren
w\"are  eine sehr  sparsame L\"osung  mit  minimalem Aufwand  (und somit  auch
Kosten) f\"ur die Schaltung. Allerdings  bringt sie einige Schwierigkeiten mit
sich. Es  ist  ein  Konzept,  das  nicht  verbreitet  und  gut  getestet  ist;
die  Machbarkeit  ist  nicht  garantiert. Es ist  daher  sinnvoll,  vor  einer
allf\"alligen Umsetzung so viele Informationen wie m\"oglich \"uber m\"ogliche
Problemzonen einzuholen, anhand  derer beurteilt werden kann,  ob die L\"osung
im Rahmen  des Projektes  realisiertbar ist,  oder ob  ein Erfolg  zu unsicher
w\"are.

% ---------------------------------------------------------------------------- %
\subsection{FSK: Kapazitive oder induktive Einkopplung}
\label{subsec:hw:fsk:kapaVsInduk}
% ---------------------------------------------------------------------------- %

Eine kapazitive Einkopplung hat die Vor- und Nachteile, dass \ldots, w\"ahrend
\ldots Nachteile sind.\todo{Vor- Nachteile}
\todo{Circuit}


Eine induktive Einkopplung legt eine  Spule um die DC-Leitung. Auf diese Spule
wird von der FSK-Schaltung das zu  \"ubertragende Signal gegeben und die Spule
induziert in  der DC-Leitung  entsprechende Spannungs-Rippel, die  vom \Master
ausgewertet werden k\"onnen. Der entsprechende  Schaltkreis ist schematisch in
Abbildung \ref{fig:circ:coupling:inductive} dargestellt.

Verglichen mit  Kondensatoren sind Spulen relativ  gross und teuer. Allerdings
ist das Prinzip  der induktiven Einkopplung gut dokumentiert  und die Aussicht
auf Erfolg (bei vern\"unftigem Aufwand) somit gut.

\begin{figure}[h!tb]
    \centering
    \input{images/circuits/coupling-inductive.tex}
    \caption{Induktive Einkopplung}
    \label{fig:circ:coupling:inductive}
\end{figure}


% ---------------------------------------------------------------------------- %
\subsection{ASK: Machbarkeitsanalyse}
\label{subsec:hw:ask:machbarkeit}
% ---------------------------------------------------------------------------- %

Die Machbarkeit dieser L\"osungsvariante soll anhand von Simulationen so weit als
m\"oglich beurteilt werden.
%Um die Machbarkeit dieser L\"osungsvariante zu beurteilen, wurden Simulationen
%durchgef\"uhrt.
Dazu  wurde  zuerst  eine  Modellschaltung  entwickelt,  deren
Parameter  definiert  und  anschliessend   Simulationen  mit  der  definierten
Konfiguration durchgef\"uhrt.

Als   Simulationstool  wird   \code{LTspice   IV}   von  Linear   Technologies
eingesetzt~\cite{ref:ltspice}.


% ---------------------------------------------------------------------------- %
\subsubsection{Entwicklung einer Modellschaltung}
\label{subsubsec:hw:ask:modell}
% ---------------------------------------------------------------------------- %

Das  Ziel  ist,   das  Verhalten  eines  PV-Moduls  zu   simulieren,  wenn  es
in  gesteuerten  Intervallen  in  der  Gr\"ossenordnung  von  einigen  hundert
Mikrosekunden  kurzgeschlossen wird  (die Schaltfrequenz,  mit der  ein Signal
in  dieser  L\"osungsvariante  \"ubertragen  w\"urde,  l\"age  ungef\"ahr  bei
\SI{10}{\kilo\hertz}).

Es wird  ein Modell f\"ur eine  einzelne Zelle entwickelt, auf  dem das Modell
eines  Moduls  aufbauen  kann. Dieses Modul  wird  anschliessend  entsprechend
dieser L\"osungsvariante beschaltet und diese Schaltung simuliert.

Als    Ausganspunkt    des    Modells    f\"ur   eine    Zelle    dient    das
Eindiodenmodell     \todo{Bindestrich     oder     ein     Wort?}     gem\"ass
Abbildung~\ref{fig:circuit:solarCell}. Dabei    wird     dieses    um    einen
Kondensator   der  Kapazit\"at   $C$   parallel   zur  Stromquelle   erg\"anzt
(basierend  auf   Informationen  aus  Quellen   \cite{ref:solar:scofield}  und
\cite{ref:solar:friesen}).

\begin{figure}[h!tb]
    \centering
    \input{images/circuits/solarCell.tex}
    \caption{%
        Schaltschema    zur    Modellierung    einer    Solarzelle    gem\"ass
        Eindiodenmodell mit zus\"atzlicher Kapazit\"at%
    }
    \label{fig:circuit:solarCell}
\end{figure}

Zur   Ermittlung  der   Parameter   dieses  Modells   wurde  pr\"imar   Quelle
\cite{ref:solar:scofield}  herangezogen. Ihr   Autor  hat  $C$,   $R_{S}$  und
$R_{P}$ einer  Solarzelle der Gr\"osse  \SI{0.43}{\centi\meter\squared} \"uber
einen   Frequenzbereicht  von   \SI{1}{\kilo\hertz}  bis   \SI{1}{\mega\hertz}
ausgemessen. Die Resultate waren:

\begin{alignat}{3}
    \label{eq:scofield:C}
    C_{\mathrm{Messung}}    &= \SI{8}{\nano\farad} \; & \text{bis} \; & \SI{20}{\nano\farad} \;  & = & \; \SI{14 \pm 6}{\nano\farad} \\
    \label{eq:scofield:Rs}
    R_{\mathrm{S, Messung}} &= \SI{0.2}{\ohm}      \; & \text{bis} \; & \SI{20}{\ohm}        \;  & = & \; \SI{10.1 \pm 9.9}{\ohm}     \\
    \label{eq:scofield:Rp}
    R_{\mathrm{P, Messung}} &= \SI{0.5}{\kilo\ohm} \; & \text{bis} \; & \SI{500}{\kilo\ohm}  \;  & = & \; \SI{250.25 \pm 249.75}{\kilo\ohm}
\end{alignat}

Um  die obigen  Werte  f\"ur  unsere Zwecke  verwenden  zu k\"onnen,  m\"ussen
sie   von  einer   Solarzelle  der   Gr\"osse  \SI{0.43}{\centi\meter\squared}
hochskaliert    werden. F\"ur   unser    Zellen-Modell    werden   wir    eine
Fl\"ache  von   \SI{243.36}{\centi\meter\squared}  verwenden   (Herleitung  in
Anhang  \ref{app:sec:cell:surface}  ab Seite  \pageref{app:sec:cell:surface}),
was   ungef\"ahr    der   600-fachen    Fl\"ache   der   Zelle    aus   Quelle
\cite{ref:solar:scofield} entspricht.

$R_{\mathrm{P}}$   und  $R_{\mathrm{S}}$   skalieren  umgekehrt   proportional
zur  Zellfl\"ache,  wogegen  $C$   bei  gr\"osser  werdender  Zelloberfl\"ache
ansteigt~\cite{ref:solar:scofield}. Das  schlimmstm\"ogliche   Szenario  f\"ur
unseren  Fall  tritt  dann  ein,  wenn der  Ausgangsstrom  der  Zelle  maximal
wird. Daf\"ur werden folgende \"Uberlegungen benutzt:

\begin{symbols}
    \firmlist
    \item[$C$]
        Beim Kurzschliessen der  Zelle treten Stromspitzen auf,  wenn sich der
        Kondensator  $C$  entl\"adt. Je  gr\"osser  dessen  Kapazit\"at,  umso
        h\"oher diese Stromspitzen.  Wir  nehmen also \SI{20}{\nano\farad} aus
        Gleichung \ref{eq:scofield:C} als Ausgangswert.
    \item[$R_{\mathrm{S}}$]
        Der aus der Solarzelle fliessende Strom wird gr\"osser, je kleiner der
        Seriewiderstand vor dem Ausgang ist. Es wird daher der niedrigere Wert
        von \SI{0.2}{\ohm} aus Gleichung \ref{eq:scofield:Rs} gew\"ahlt.
    \item[$R_{\mathrm{P}}$]
        Je gr\"osser der  Parallelwiderstand ist, um so  weniger Strom fliesst
        durch ihn. Da die  Zelle von einer Stromquelle versorgt  wird und sich
        somit  der gesamte  verf\"ugbare  Strom nicht  \"andert, fliesst  mehr
        Strom  aus dem  Zellenausgang, wenn  der Parallelwiderstand  gr\"osser
        ist. Es  wird   somit  der  Wert  \SI{500}{\kilo\ohm}   aus  Gleichung
        \ref{eq:scofield:Rp} verwendet.
\end{symbols}

Skaliert auf eine Solarzelle von ca. \SI{240}{\centi\meter\squared} ergibt dies:
\begin{alignat}{2}
    C               &= C_{\mathrm{Messung}}    &\cdot 600 &= \SI{12}{\micro\farad} \\
    R_{\mathrm{S,}} &= R_{\mathrm{S, Messung}} &\div  600 &= \SI{333}{\micro\ohm}    \\
    R_{\mathrm{P,}} &= R_{\mathrm{P, Messung}} &\div  600 &= \SI{833}{\ohm}
\end{alignat}

Wie  in  Anhang  \ref{app:sec:cell:UI}  (ab  Seite  \pageref{app:sec:cell:UI})
erw\"ahnt, gehen wir davon aus, dass ein Modul nicht mehr als \SI{10}{\ampere}
liefern wird. Abh\"angig davon, ob  wir mehrere Str\"ange mit polykristallinen
Zellen parallel  schalten oder  ein Modul haben,  welches lediglich  aus einem
Strang  monokristalliner Zellen  besteht,  wird daher  der  Strom einer  Zelle
entsprechend angepasst:

\begin{align}
    I_{\mathrm{SC, polykristallin}} & = \SI{5}{\ampere} \quad \text{(2 parallele Str\"ange)} \\
    I_{\mathrm{SC, monokristallin}} & = \SI{10}{\ampere}
\end{align}

Die vom Modell zu erzielende Leerlaufspannung $V_{\mathrm{offen}}$ einer Zelle
ist ebenfalls in Anhang \label{app:sec:cell:UI} hergeleitet:

\begin{equation}
    \label{eq:voffen}
    V_{\mathrm{offen}} = \SI{600}{\milli\volt}
\end{equation}


Es bleiben noch die Parameter der Diode zu bestimmen. Ausganslage f\"ur das
Diodenmodell ist die Diodengleichung:\todo{source?}

\begin{equation}
    \label{eq:diode}
    I_{\mathrm{D}} = I_{\mathrm{S}} \cdot \left( \exp\left(\frac{q \cdot V}{n \cdot k \cdot T}\right) - 1 \right)
\end{equation}

\begin{conditions}
    I_{\mathrm{D}} & Diodenstrom \\
    I_{\mathrm{S}} & Reverse saturation current \\
    q              & Elementarladung eines Elektrons (\SI{1.602e-19}{\coulomb}) \\
    V              & Diodenspannung \\
    n              & Idealit\"atsfaktor \\
    k              & Boltzmannkonstante (\SI{1.38e-23}{\joule\per\kelvin}) \\
    T              & Diodentemperatur \\
\end{conditions}

Der   Reverse   Saturation  Current   ist   der   Strom,  der   beim   Anlegen
einer  negativen   Spannung  \"uber  die   Diode  fliesst,  bevor   die  Diode
durchbricht~\cite{ref:solar:diodeCharacteristics}.    Er  liegt   bei  kleinen
Dioden \"ublicherweise Bereich von Nano-Amp\`ere bis Femto-Amp\`ere\todo{F\"ur
k\"aufliche Dioden, nicht  Solarzellen}, bei einer Solarzelle  wird er h\"oher
liegen, da diese gr\"osser ist.

Wie  man an  Gleichung \ref{eq:diode}  erkennen kann,  steigt der  Diodenstrom
f\"ur eine gegebene Spannung, wenn der Reverse Saturation Current ansteigt.

Der Idealit\"atsfaktor ist ein Indikator  f\"ur den Spannungsabfall \"uber der
Diode in  Abh\"angigkeit des durchfliessenden Stromes  und liegt normalerweise
zwischen  1  (ideale  Diode)   und  2. Je  gr\"osser  der  Idealit\"atsfaktor,
umso  h\"oher  der Spannungsabfall  \"uber  der  Diode f\"ur  einen  gegebenen
Strom  (bzw.  umso kleiner  der  Strom  bei einer  fixen  Spannung). Abbildung
\ref{fig:diodeVI:IS} zeigt das Strom-Spannungsverhalten  einer Diode sowie den
Einfluss von $I_{\mathrm{S}}$ und $n$ schematisch.\todo{Pfeile auf Achsen}

\begin{figure}[h!tb]
    \input{images/python/diodeVI.pgf}
    \caption{%
        Vereinfachte Strom-Spannungs-Kurve einer Diode. Der Reverse Saturation
        Current   $I_{\mathrm{S}}$   tritt   im   \textcolor{magenta}{magenta}
        eingef\"arbten Bereich auf. Der angegebene Zahlenwert bezieht sich auf
        den  Bereich  der  Kurve,  in der  $I_{\mathrm{S}}$  relativ  konstant
        ist.\protect\\
        Die    \textcolor{blue}{blaue   Kurve}    dient   als    Referenz. Die
        \textcolor{red}{rote  Kurve}  zeigt  den Einfluss  eines  ansteigenden
        Idealit\"atsfaktors  (also  st\"arkeres  Abweichen von  einer  idealen
        Diode) auf die IV-Kennlinie.\protect\\
        Die \textcolor{green!50!black}{gr\"une Kurve} zeigt den Einfluss eines
        ansteigenden  Reverse Saturation  Current: Der Diodenstrom  steigt bei
        einer gegebenen Diodenspannung.\protect\\
        Zur  Verbesserung  der  \"Ubersichtlichkeit  wurden  die  abweichenden
        Kurven nur  im positiven Bereich geplottet,  nat\"urlich \"andert sich
        auch das Verhalten im Reverse-Betrieb analog.%
    }
    \label{fig:diodeVI:IS}
\end{figure}

\todo{Reverse-Betrieb-Kurven: analog?}

Zur Simulation  in \code{LTspice}  wir das Modell  auf den  Reverse Saturation
Current und  den Idealit\"atsfaktor reduziert, und  folgendes Diodenmodell aus
Ausgangslage benutzt:

\begin{center}
    \code{.model diode1 D(IS=1e-6 N=2)}
\end{center}

Es wird die Schaltung gem\"ass Abbildung \ref{fig:circuit:solarCell} von Seite
\pageref{fig:circuit:solarCell} aufgebaut und die  oben bestimmten Werte f\"ur
$R_{\mathrm{S}}$, $R_{\mathrm{P}}$ und $C$ eingesetzt.



\todo{Schema von LTspice. Appendix?}
Nun  wird  die  Zelle  simuliert   (Spice  Directive  \code{.tran  1m}),  ihre
Leerlaufspannung  $V_{\mathrm{offen}}$  gemessen  und  mit  dem  Zielwert  aus
Gleichung~\ref{eq:voffen}  verglichen.  Anschliessend  werden die  Werte f\"ur
\code{IS}  und  \code{N}  angepasst,  bis  die  gew\"unschte  Leerlaufspannung
erreicht wird.

Nach einigen Iterationen liefert dieser Prozess\footnotemark:

\footnotetext{%
    Dies ist eine m\"ogliche L\"osung. Es gibt nat\"urlich noch beliebig viele
    weitere  Kombinationen von  \code{IS} und  \code{N}, welche  die gegebenen
    Bedingungen  erf\"ullen. Wir   sind  hier  lediglich  an   einer  L\"osung
    interessiert, von  der wir zuversichtlich  sind, dass sie  ein hinreichend
    gutes Modell liefert.%
}

\begin{align}
    \label{eq:cell:diode:IS:N:result}
    I_s &= \SI{5}{\micro\ampere} \\
    N   &= 1.6
\end{align}

Somit ist  das Modell  einer einzelnen  Zelle bestimmt  und kann  dazu benutzt
werden,  ein Modul  zu  simulieren. Es soll  dabei ein  Modul  aus 72  Zellen,
geschaltet in zwei parallelen Str\"angen mit  je 36 Zellen in Serie, simuliert
werden.\todo{Wieso?}

\myfancybreak

Bei der Modellierung eines Moduls stehen zwei Varianten zur Verf\"ugung:

\begin{enumerate}
    \item
        Modellierung  \"ahnlich  zur  einzelnen   Zelle  gem\"ass  dem  Schema
        in  Abbildung   \ref{fig:circuit:solarCell}. Dabei  m\"ussen  Methoden
        gefunden werden, um die Parameter des  Modells von einer Zelle auf ein
        Modul umzurechnen.  Das Schaltbild dieser  Methode ist einfach und der
        Rechenaufwand ist gering.

        Der Knackpunkt besteht darin, brauchbare Methoden zu finden, mit denen
        die  Parameter von  einer  Zelle auf  ein  Modul hochgerechnet  werden
        k\"onnen.
    \item
        Man baut einen Schaltkreis auf, der die entsprechende Anzahl Module in
        der  gew\"unschten  Weise  miteinander  verbindet,  wie  auch  in  der
        Realit\"at ein Modul aus mehreren Zellen zusammengesetzt ist.

        Vorausgesetzt, die Parameter f\"ur eine  Zelle sind gen\"ugend nahe an
        der Realit\"at, kann man mit  gutem Gewissen davon ausgehen, dass auch
        die erhaltenen Resultate f\"ur das Modul brauchbar sind.

        Nachteilig ist hier die  Komplexit\"at. Das Zusammensetzen des Modells
        ist aufw\"andiger, das Gleiche gilt f\"ur den Rechenaufwand.
\end{enumerate}

Die  verf\"ugbaren   Informationen  zum  Skalieren  eines   Zellenmodells  auf
ein   Modul  bei   gleichbleibendem  Schaltschema   gen\"ugen  nicht   unseren
Anspr\"uchen. Daher wird  ein Modul  gem\"ass Variante  2 mit  72 Zellen  in 2
parallelen Str\"angen mit je 36  Zellen in Serie simuliert.

Das  gesteuerte Kurzschliessen  des Moduls  wird mit  einem MOSFET  umgesetzt,
welcher  zwischen  Eingang  und  Ausgang des  Moduls  durchschalten  kann. Der
Microcontroller  auf der  Sensorplatine  steuert  dabei den  MOSFET. Abbildung
\ref{fig:module:mosfet:simple} zeigt diesen  Aufbau vereinfacht, die komplette
Schaltung  ist im  Anhang in  Abbildung \ref{fig:ltspice:solarmodul:cellBased}
auf Seite \pageref{fig:ltspice:solarmodul:cellBased} zu finden.

\begin{figure}[h!tb]
    \centering
    \input{images/circuits/moduleMOSFET.tex}
    \caption{%
        Gesteuerter     Kurzschluss     eines    Solarmoduls     mit     einem
        microcontroller-gesteuerten MOSFET. Die  vollst\"andige zur Simulation
        benutzte \code{LTspice}-Schaltung ist  in Anhang \ref{app:simu:module}
        auf Seite \pageref{fig:ltspice:solarmodul:cellBased} dokumentiert.%
    }
    \label{fig:module:mosfet:simple}
\end{figure}


% ---------------------------------------------------------------------------- %
\subsubsection{Simulation und Resultate}
\label{subsubsec:hw:ask:simu}
% ---------------------------------------------------------------------------- %


\begin{figure}
    \begin{tikzpicture}
       \begin{scope}[x={(0mm,0mm)},y={(220mm,\textwidth)}]
           \begin{axis}[%
                   %xmode=log,
                   height=65mm,
                   width=\textwidth,
                   at={(0,150mm)},
                   grid=both,
               ]
               \addplot[-,color=blue] table {data/module-72cells--I-MOSFET--0005u.dat};
           \end{axis}
           \begin{axis}[%
                   %xmode=log,
                   height=65mm,
                   width=\textwidth,
                   at={(0,80mm)},
                   grid=both,
               ]
               \addplot[-,color=magenta] table {data/module-72cells--U-MOSFET--0005u.dat};
           \end{axis}
           \begin{axis}[%
                   %xmode=log,
                   height=65mm,
                   width=\textwidth,
                   at={(0,0)},
                   grid=both,
               ]
               \addplot[-,color=red] table {data/module-72cells--P-MOSFET--0005u.dat};
           \end{axis}
       \end{scope}
   \end{tikzpicture}
\end{figure}

\begin{figure}
    \begin{tikzpicture}
       \begin{scope}[x={(0mm,0mm)},y={(220mm,\textwidth)}]
           \begin{axis}[%
                   %xmode=log,
                   height=65mm,
                   width=\textwidth,
                   at={(0,150mm)},
                   grid=both,
               ]
               \addplot[-,color=blue] table {data/module-72cells--I-MOSFET--0070u.dat};
           \end{axis}
           \begin{axis}[%
                   %xmode=log,
                   height=65mm,
                   width=\textwidth,
                   at={(0,80mm)},
                   grid=both,
               ]
               \addplot[-,color=magenta] table {data/module-72cells--U-MOSFET--0070u.dat};
           \end{axis}
           \begin{axis}[%
                   %xmode=log,
                   height=65mm,
                   width=\textwidth,
                   at={(0,0)},
                   grid=both,
               ]
               \addplot[-,color=red] table {data/module-72cells--P-MOSFET--0070u.dat};
           \end{axis}
       \end{scope}
   \end{tikzpicture}
\end{figure}

\begin{figure}
    \begin{tikzpicture}
       \begin{scope}[x={(0mm,0mm)},y={(220mm,\textwidth)}]
           \begin{axis}[%
                   %xmode=log,
                   height=65mm,
                   width=\textwidth,
                   at={(0,150mm)},
                   grid=both,
               ]
               \addplot[-,color=blue] table {data/module-72cells--I-MOSFET--1000u.dat};
           \end{axis}
           \begin{axis}[%
                   %xmode=log,
                   height=65mm,
                   width=\textwidth,
                   at={(0,80mm)},
                   grid=both,
               ]
               \addplot[-,color=magenta] table {data/module-72cells--U-MOSFET--1000u.dat};
           \end{axis}
           \begin{axis}[%
                   %xmode=log,
                   height=65mm,
                   width=\textwidth,
                   at={(0,0)},
                   grid=both,
               ]
               \addplot[-,color=red] table {data/module-72cells--P-MOSFET--1000u.dat};
           \end{axis}
       \end{scope}
   \end{tikzpicture}
\end{figure}


% ---------------------------------------------------------------------------- %
\clearpage
\section{Sensorplatine}
\label{sec:hw:sensorplatine}
% ---------------------------------------------------------------------------- %

Was  ist der  Zweck  der Sensorplatine? Welche  Aufgaben  muss sie  erf\"ullen
k\"onnen? Wie ist sie aufgebaut? PCB-Layout? Energieversorgung?

\anweisung Dimensionierung der Bauteile: Berechnungen

% ---------------------------------------------------------------------------- %
\subsection{Energieversorgung}
\label{subsec:sensor:pcb}
% ---------------------------------------------------------------------------- %

Energiebezug,  Leistungsanforderungen, Standby,  Verhalten bei  ungen\"ugender
Leistungszufuhr, ...


% ---------------------------------------------------------------------------- %
\subsection{PCB}
\label{subsec:sensor:pcb}
% ---------------------------------------------------------------------------- %

Wie sieht das PCB aus, und weshalb?

% ---------------------------------------------------------------------------- %
\section{Master-Ger\"at}
\label{sec:hw:mastergerat}
% ---------------------------------------------------------------------------- %

Was ist der Zweck des Master-Ger\"ats? Aufgaben? Aufbau?

\anweisung Dimensionierung der Bauteile: Berechnungen


% ---------------------------------------------------------------------------- %
\subsection{Speisung}
\label{subsec:mastergerat:speisung}
% ---------------------------------------------------------------------------- %

Woher bezieht das Master-Ger\"at  seine Energie, weshalb? Wieviel Energie wird
ben\"otigt?


% ---------------------------------------------------------------------------- %
\subsection{Benutzer-Interface}
\label{subsec:mastergerat:interface}
% ---------------------------------------------------------------------------- %

\anweisung Das Benutzerinterface ist schon in der Anleitung im vorigen Kapitel
beschrieben worden. Es soll  hier um die Komponentenwahl gehen,  nicht um eine
Rekapitulation bereits gemachter Informationen.

% ---------------------------------------------------------------------------- %
\subsection{PCB}
\label{subsec:mastergerat:pcb}
% ---------------------------------------------------------------------------- %

Wie sieht das PCB aus, und weshalb?

% ---------------------------------------------------------------------------- %
\subsection{Montage/Geh\"ause}
\label{subsec:mastergerat:pcb}
% ---------------------------------------------------------------------------- %

Einbindung in die Umgebung, Wahl des Geh\"auses.


% ---------------------------------------------------------------------------- %
\section{Kommunikation}
\label{sec:kommunikation}
% ---------------------------------------------------------------------------- %

Die   Kommunikation  zwischen   Sensor  und   Master-Ger\"at  ist   eines  der
Herzst\"ucke des ganzen Systems und betrifft beide Sub-Systeme. Daher in einem
eigenen Abschnitt.

\begin{itemize}
    \item
        Grunds\"atzliches Problem
    \item
        Verfolgte L\"osungsans\"atze
    \item
        Ausgew\"ahlter L\"osungsansatz (mit Begr\"undung(en))
    \item
        Genauere Beschreibung dieses L\"osungsansatzes
\end{itemize}
