% **************************************************************************** %
\chapter{L\"osungsans\"atze und Simulationen}
\label{chap:simu}
% **************************************************************************** %

Bevor  simuliert  werden  kann,  m\"ussen  die  daf\"ur  ben\"otigten  Modelle
vorhanden sein. Es  wird zuerst ein  Modell f\"ur eine  Solarzelle entwickelt.
Anschliessend wird dieses Zellenmodell benutzt, um ein Modul aufzubauen.

In  diesem Abschnitt  werden Schaltungen  f\"ur drei  L\"osungsans\"atze (zwei
zur  FSK, eine  zur  ASK)  vorgestellt, mit  \code{LTspice  IV} simuliert  und
beurteilt.\todo{LTspice: source}

Es werden  jeweils die  Schaltung f\"ur  den Sender,  den Empf\"anger  und das
Gesamtsystem untersucht.


% ---------------------------------------------------------------------------- %
\section{Modellierung einer PV-Zelle}
\label{sec:simu:model:cell}
% ---------------------------------------------------------------------------- %


Ziel ist, eine Zelle zu modellieren, welche folgende Eigenschaften erf\"ullt:

\begin{align}
    U_{\mathrm{Leerlauf}}                    &= \SI{600}{\milli\volt} \\
    I_{\mathrm{Kurzschluss, polykristallin}} &=  \SI{5}{\ampere}      \\
    I_{\mathrm{Kurzschluss, monokristallin}} &= \SI{10}{\ampere}
\end{align}

Die Herleitung  dieser Werte ist  in Anhang \ref{app:subsec:cell:UI}  ab Seite
\pageref{app:subsec:cell:UI}  zu finden  und  basiert auf  den Modulen,  deren
Daten in Tabelle \ref{tab:moduleData:IU} auf Seite \pageref{tab:moduleData:IU}
aufgelistet  sind.   Es  werden  zwei  Zielwerte  f\"ur  den  Kurzschlussstrom
angegeben;  einer f\"ur  monokristalline Zellen,  einer f\"ur  polykristalline
Zellen.

Als  Grundlage f\"ur  das  Modell dient  das  Eindiodenmodell einer  PV-Zelle,
erweitert  um  eine parallele  Kapazit\"at  $C$  (basierend auf  Informationen
aus  \cite{ref:solar:scofield} und  \cite{ref:solar:friesen}), dargestellt  in
\fref{fig:circuit:solarCell}.

\clearpage
\begin{figure}[h!tb]
    \centering
    \input{images/circuits/solarCell.tex}
    \caption{%
        Schaltschema    zur    Modellierung    einer    Solarzelle    gem\"ass
        Eindiodenmodell mit zus\"atzlicher Kapazit\"at%
    }
    \label{fig:circuit:solarCell}
\end{figure}

Bei diesem Modell sind insgesamt f\"unf Parameter zu bestimmen:

\begin{itemize}
    \firmlist
    \item
        Seriewiderstand $R_{\mathrm{S}}$
    \item
        Shunt-Widerstand $R_{\mathrm{P}}$
    \item
        Parasit\"are Kapazit\"at $C$
    \item
        Diode   $D$: Reverse    Saturation   Current    $I_{\mathrm{S}}$   und
        Idealit\"atsfaktor $n$
\end{itemize}

Es werden zuerst die Kapazit\"at und die Widerst\"ande bestimmt.

In \cite{ref:solar:scofield} wurden $C$, $R_{\mathrm{S}}$ und $R_{\mathrm{P}}$
einer  Solarzelle der  Gr\"osse  \SI{0.43}{\centi\meter\squared} \"uber  einen
Frequenzbereicht von \SI{1}{\kilo\hertz} bis \SI{1}{\mega\hertz} gemessen. Die
Resultate waren:

\begin{alignat}{3}
    \label{eq:scofield:C}
    C_{\mathrm{Messung}}    &= \SI{8}{\nano\farad} \; & \text{bis} \; & \SI{20}{\nano\farad} \;  & = & \; \SI{14 \pm 6}{\nano\farad} \\
    \label{eq:scofield:Rs}
    R_{\mathrm{S, Messung}} &= \SI{0.2}{\ohm}      \; & \text{bis} \; & \SI{20}{\ohm}        \;  & = & \; \SI{10.1 \pm 9.9}{\ohm}     \\
    \label{eq:scofield:Rp}
    R_{\mathrm{P, Messung}} &= \SI{0.5}{\kilo\ohm} \; & \text{bis} \; & \SI{500}{\kilo\ohm}  \;  & = & \; \SI{250.25 \pm 249.75}{\kilo\ohm}
\end{alignat}

Um   die   obigen  Werte   f\"ur   unsere   Zwecke  verwenden   zu   k\"onnen,
m\"ussen  sie  auf  eine  Zelle  der  Fl\"ache  \SI{240}{\centi\meter\squared}
(zur  Herleitung  dieses  Werts  siehe  Anhang  \ref{app:sec:cell:surface}  ab
Seite  \pageref{app:sec:cell:surface}) um  ungef\"ahr  einen Faktor  \num{600}
hochskaliert werden.

$R_{\mathrm{P}}$   und  $R_{\mathrm{S}}$   skalieren  umgekehrt   proportional
zur   Zellfl\"ache,    wogegen   $C$   bei   gr\"osser    werdender   Fl\"ache
ansteigt~\cite{ref:solar:scofield}. Das  schlimmstm\"ogliche   Szenario  f\"ur
unseren   Fall  tritt   ein,  wenn   der  Ausgangsstrom   der  Zelle   maximal
wird\todo{korrekt?}. Folgende Werte werden deshalb gew\"ahlt:

\begin{symbols}
    \firmlist
    \item[$C$]
        Beim Kurzschliessen der  Zelle treten Stromspitzen auf,  wenn sich der
        Kondensator  $C$  entl\"adt. Je  gr\"osser  dessen  Kapazit\"at,  umso
        h\"oher diese Stromspitzen.  Wir  nehmen also \SI{20}{\nano\farad} aus
        Gleichung \ref{eq:scofield:C} als Ausgangswert.
    \item[$R_{\mathrm{S}}$]
        Der aus der Solarzelle fliessende Strom wird gr\"osser, je kleiner der
        Seriewiderstand vor dem Ausgang ist. Es wird daher der niedrigere Wert
        von \SI{0.2}{\ohm} aus Gleichung \ref{eq:scofield:Rs} gew\"ahlt.
    \item[$R_{\mathrm{P}}$]
        Je    gr\"osser   der    Parallelwiderstand   im    Verh\"altnis   zum
        Seriewiderstand  ist, um  so mehr  Strom fliesst  aus dem  Ausgang der
        Zelle.  Es wird deshalb der h\"ochste Wert von \SI{500}{\kilo\ohm} aus
        Gleichung \ref{eq:scofield:Rp} als Ausgangswert verwendet.
\end{symbols}

Die skalierten Werte sind somit:
\begin{alignat}{2}
    C               &= C_{\mathrm{Messung}}    &\cdot 600 &= \SI{12}{\micro\farad} \\
    R_{\mathrm{S,}} &= R_{\mathrm{S, Messung}} &\div  600 &= \SI{333}{\micro\ohm}    \\
    R_{\mathrm{P,}} &= R_{\mathrm{P, Messung}} &\div  600 &= \SI{833}{\ohm}
\end{alignat}



Es bleiben noch die Parameter der Diode zu bestimmen. Ausganslage f\"ur das
Diodenmodell ist die Shockley-Diodengleichung:\todo{source?}

\begin{equation}
    \label{eq:diode}
    I_{\mathrm{D}} = I_{\mathrm{S}} \cdot \left( \exp\left(\frac{q \cdot V}{n \cdot k \cdot T}\right) - 1 \right)
\end{equation}

\begin{conditions}
    I_{\mathrm{D}} & Diodenstrom \\
    I_{\mathrm{S}} & Reverse saturation current \\
    q              & Elementarladung eines Elektrons (\SI{1.602e-19}{\coulomb}) \\
    V              & Diodenspannung \\
    n              & Idealit\"atsfaktor \\
    k              & Boltzmannkonstante (\SI{1.38e-23}{\joule\per\kelvin}) \\
    T              & Diodentemperatur \\
\end{conditions}

Der   Reverse   Saturation  Current   ist   der   Strom,  der   beim   Anlegen
einer  negativen   Spannung  \"uber  die   Diode  fliesst,  bevor   die  Diode
durchbricht~\cite{ref:solar:diodeCharacteristics}.    Er  liegt   bei  kleinen
Dioden \"ublicherweise Bereich von Nano-Amp\`ere bis Femto-Amp\`ere\todo{F\"ur
k\"aufliche Dioden, nicht  Solarzellen}, bei einer Solarzelle  wird er h\"oher
liegen, da diese gr\"osser ist.

Wie  man an  Gleichung \ref{eq:diode}  erkennen kann,  steigt der  Diodenstrom
f\"ur eine gegebene Spannung, wenn der Reverse Saturation Current ansteigt.

Der Idealit\"atsfaktor ist ein Indikator  f\"ur den Spannungsabfall \"uber der
Diode in  Abh\"angigkeit des durchfliessenden Stromes  und liegt normalerweise
zwischen  1  (ideale  Diode)   und  2. Je  gr\"osser  der  Idealit\"atsfaktor,
umso  h\"oher  der Spannungsabfall  \"uber  der  Diode f\"ur  einen  gegebenen
Strom  (bzw.  umso kleiner  der  Strom  bei einer  fixen  Spannung). Abbildung
\ref{fig:diodeVI:IS} zeigt das Strom-Spannungsverhalten  einer Diode sowie den
Einfluss von $I_{\mathrm{S}}$ und $n$ schematisch.

\begin{figure}[h!tb]
    \input{images/python/diodeVI.pgf}
    \caption{%
        Vereinfachte Strom-Spannungs-Kurve einer Diode. Der Reverse Saturation
        Current   $I_{\mathrm{S}}$   tritt   im   \textcolor{magenta}{magenta}
        eingef\"arbten Bereich auf. Der angegebene Zahlenwert bezieht sich auf
        den  Bereich  der  Kurve,  in der  $I_{\mathrm{S}}$  relativ  konstant
        ist.\protect\\
        Die    \textcolor{blue}{blaue   Kurve}    dient   als    Referenz. Die
        \textcolor{red}{rote  Kurve}  zeigt  den Einfluss  eines  ansteigenden
        Idealit\"atsfaktors  (also  st\"arkeres  Abweichen von  einer  idealen
        Diode) auf die IV-Kennlinie.\protect\\
        Die \textcolor{green!50!black}{gr\"une Kurve} zeigt den Einfluss eines
        ansteigenden  Reverse Saturation  Current: Der Diodenstrom  steigt bei
        einer gegebenen Diodenspannung.\protect\\
        Zur  Verbesserung  der  \"Ubersichtlichkeit  wurden  die  abweichenden
        Kurven nur  im positiven Bereich geplottet,  nat\"urlich \"andert sich
        auch das Verhalten im Reverse-Betrieb analog.%
    }
    \label{fig:diodeVI:IS}
\end{figure}

\todo{Reverse-Betrieb-Kurven: analog?}

Zur  Simulation  in  \code{LTspice}  wird das  Diodenmodell  auf  den  Reverse
Saturation  Current   und  den  Idealit\"atsfaktor  reduziert,   und  folgende
gesch\"atzte Parameter als Ausgangslage f\"ur den Iterationsprozess benutzt:

\begin{center}
    \code{.model diode1 D(IS=1e-6 N=2)}
\end{center}

Es wird die Schaltung gem\"ass Abbildung \ref{fig:circuit:solarCell} von Seite
\pageref{fig:circuit:solarCell} aufgebaut und die  oben bestimmten Werte f\"ur
$R_{\mathrm{S}}$, $R_{\mathrm{P}}$ und $C$ eingesetzt.

Mit einer  Transientensimulation (\code{.tran  1m}) wird die  Zelle simuliert,
ihre  Leerlaufspannung  $V_{\mathrm{offen}}$  gemessen und  mit  dem  Zielwert
aus   Gleichung~\ref{eq:voffen}  verglichen\todo{``wird''   nur  einmal   oder
wiederholen?}.  Anschliessend  werden die  Werte f\"ur \code{IS}  und \code{N}
angepasst, bis die gew\"unschte Leerlaufspannung erreicht ist.

Nach einigen Iterationen liefert dieser Prozess\footnotemark:

\footnotetext{%
    Dies ist eine m\"ogliche L\"osung. Es gibt nat\"urlich noch beliebig viele
    weitere  Kombinationen von  \code{IS} und  \code{N}, welche  die gegebenen
    Bedingungen  erf\"ullen. Wir   sind  hier  lediglich  an   einer  L\"osung
    interessiert, von  der wir zuversichtlich  sind, dass sie  ein hinreichend
    gutes Modell liefert.%
}

\begin{align}
    \label{eq:cell:diode:IS:N:result}
    I_s &= \SI{4}{\micro\ampere} \\
    N   &= 1.65
\end{align}

Somit ist  das Modell  einer einzelnen  Zelle bestimmt  und kann  dazu benutzt
werden,  ein   Modul  aufzubauen.


% ---------------------------------------------------------------------------- %
\section{Modellierung eines PV-Moduls}
\label{sec:simu:model:module}
% ---------------------------------------------------------------------------- %

\todo{referenz auf vereinfachtes Modell}

Wie  in   Anhang  \ref{app:simu:module}  ab   Seite  \pageref{app:simu:module}
erw\"ahnt,     werden     zwei      verschiedene     Module     simuliert: Ein
Modul    mit    zwei    parallelen     Str\"angen    zu    je    36    seriell
geschalteten    Zellen     (\fref{fig:ltspice:module:cellBased:36x2},    Seite
\pageref{fig:ltspice:module:cellBased:36x2})    und   ein    Modul   mit    72
in   Serie   geschalteten  Zellen   (\fref{fig:ltspice:module:cellBased:72x1},
Seite     \pageref{fig:ltspice:module:cellBased:72x1}). Die     $36     \times
2$-Konfiguration\todo{Bindestrich?}   hat   eine  h\"ohere   Kapazit\"at   als
die   $72  \times   1$-Anordnung,   liefert  daf\"ur   aber   nur  die   halbe
Ausgangsspannung. Der Ausgangsstrom  beider Module wurde  auf \SI{10}{\ampere}
festgelegt,  die Stromquellen  im  $36 \times  2$-Modul  geben also  lediglich
\SI{5}{\ampere}  ab. Basierend auf  Tabelle \ref{tab:moduleData:IU}  von Seite
\pageref{tab:moduleData:IU}  mit Informationen  zu kommerziell  erh\"altlichen
Solarmodulen scheint uns dieser Ansatz gerechtfertigt.

\fref{fig:ltspice:solarCell}   zeigt   die  Implementation   unseres   Modells
einer     Solarzelle      gem\"ass     \fref{fig:circuit:solarCell}     (Seite
\pageref{fig:circuit:solarCell} in Abschnitt \ref{subsubsec:hw:ask:modell}) in
\code{LTspice}.

Ein MOSFET  wird benutzt, um  die Zelle  gesteuert (in unserer  Simulation bei
einer Tr\"agerfrequenz von \SI{10}{\kilo\hertz}) kurzschliessen zu k\"onnen.

Es    soll   das    f\"ur   den    MOSFET   schlimmere    Szenario   evaluiert
werden   (mehr    Strom/Leistung   durch    den   MOSFET\todo{Korrekt?}). Dazu
werden   aus  72   Zellen  zwei   verschiedene  Module   aufgebaut: Ein  Modul
\"ahnlich    zum    Sunset   Solargenerator    AS150    \cite{ref:solar:as150}
mit    ca. \SI{10}{\ampere}   Kurzschlussstrom    und   etwa    \SI{22}{\volt}
Leerlaufspannung  (\fref{fig:ltspice:module:cellBased:36x2}),  und  ein  Modul
\"ahnlich  zum Sunmodule  Pro-Series  XL SWB320  \cite{ref:solar:sunmodulePro}
mit   \SI{10}{\ampere}   Kurzschlussstrom    und   ungef\"ahr   \SI{45}{\volt}
Leerlaufspannung (\fref{fig:ltspice:module:cellBased:72x1}).

Weil die gesamte Kapazit\"at bei in Serie geschalteten Kondensatoren sinkt und
bei  paralleler  Anordnung steigt,  hat  die  $2 \times  36$-Parallelschaltung
\todo{Bindestrich und Spaces?} etwa die doppelte Kapazit\"at des Einzelstrangs
aus 72 Zellen. Der  durch den MOSFET fliessende Stroms, die  \"uber den MOSFET
abfallende Spannung und die im  MOSFET dissipierte Leistung beim Durchschalten
des Transistors sollen zwischen den beiden Szenarien verglichen werden.

Die zu  diesen Schaltungen geh\"orenden \code{.asc}-Dateien  sind elektronisch
verf\"ugbar  (Datentr\"ager  siehe Anhang  \ref{app:electronicStorage},  Seite
\pageref{app:electronicStorage}).

\todo{kleines Bild der gesamten Schaltung?}


% ---------------------------------------------------------------------------- %
\section{Frequenzumtastung: Kapazitive Einkopplung}
\label{sec:simu:fsk:capacitive}
% ---------------------------------------------------------------------------- %

% ---------------------------------------------------------------------------- %
\subsection{Sender}
\label{sec:simu:fsk:capacitive:transmitter}
% ---------------------------------------------------------------------------- %

% ---------------------------------------------------------------------------- %
\subsection{Empf\"anger}
\label{sec:simu:fsk:capacitive:receiver}
% ---------------------------------------------------------------------------- %

% ---------------------------------------------------------------------------- %
\subsection{Gesamtsystem}
\label{sec:simu:fsk:capacitive:system}
% ---------------------------------------------------------------------------- %

% ---------------------------------------------------------------------------- %
\section{Frequenzumtastung: Induktive Einkopplung}
\label{sec:simu:fsk:inductive}
% ---------------------------------------------------------------------------- %

Eine induktive Einkopplung legt eine  Spule um die DC-Leitung. Auf diese Spule
wird von der FSK-Schaltung das zu  \"ubertragende Signal gegeben und die Spule
induziert in  der DC-Leitung  entsprechende Spannungs-Rippel, die  vom \Master
ausgewertet werden k\"onnen. Der entsprechende  Schaltkreis ist schematisch in
Abbildung \ref{fig:circ:coupling:inductive} dargestellt.

Verglichen mit  Kondensatoren sind Spulen relativ  gross und teuer. Allerdings
ist das Prinzip  der induktiven Einkopplung gut dokumentiert  und die Aussicht
auf Erfolg (bei vern\"unftigem Aufwand) somit gut.

\begin{figure}[h!tb]
    \centering
    \input{images/circuits/coupling-inductive.tex}
    \caption{Induktive Einkopplung}
    \label{fig:circ:coupling:inductive}
\end{figure}

% ---------------------------------------------------------------------------- %
\subsection{Sender}
\label{sec:simu:fsk:inductive:transmitter}
% ---------------------------------------------------------------------------- %

% ---------------------------------------------------------------------------- %
\subsection{Empf\"anger}
\label{sec:simu:fsk:inductive:receiver}
% ---------------------------------------------------------------------------- %

% ---------------------------------------------------------------------------- %
\subsection{Gesamtsystem}
\label{sec:simu:fsk:inductive:inductive}
% ---------------------------------------------------------------------------- %


% ---------------------------------------------------------------------------- %
\section{Amplitudenumtastung}
\label{sec:simu:ask}
% ---------------------------------------------------------------------------- %

Wie in Abschnitt \todo{reference} erw\"ahnt, wird bei dieser L\"osungsvariante
jeweils   ein   Modul   gesteuert   kurzgeschlossen. Dies   verursacht   kurze
Spannungseinbr\"uche auf  der DC-Leitung,  welche vom  Empf\"anger ausgewertet
werden k\"onnen, wie in Abbildung \todo{reference}vereinfact dargestellt.

Potentielle Probleme sind bei  dieser L\"osungsvariante in folgenden Bereichen
zu suchen:

\begin{symbols}
    \firmlist
    \item[\textbf{Induktivit\"at der Leitung:}]
        Der  Spannungsabfall   auf  der  DC-Leitung  wird   bei  geschlossenem
        Stromkreis zu Strom\"anderungen auf der DC-Leitung f\"uhren. Dies wird
        eine Spannungs\"anderung auf der DC-Leitung bewirken\footnotemark.
        \footnotetext{%
            Spannung in Abh\"angigkeit der Strom\"anderung:
            $v = L \cdot \frac{\mathrm{d}i}{\mathrm{d}t}$%
        }

        Gem\"ass    Lenz'scher     Regel    \todo{reference}     wird    diese
        Spannungs\"anderung  so gerichtet  sein,  dass  sich der  zugeh\"orige
        Strom der aufgezwungenen \"Anderung widersetzt.

        Es  kann also  sein, dass  die  Induktivit\"at der  DC-Leitung das  zu
        \"ubertragende  Signal  so  stark  kompensiert,  dass  es  nicht  mehr
        detektierbar  ist. Je   h\"oher  die  Frequenz,  mit   der  das  Modul
        kurzgeschlossen  und  wieder  ge\"offnet   wird,  um  so  h\"oher  die
        zugeh\"origen Strom\"anderungen
        $\frac{\mathrm{d}i}{\mathrm{d}{t}}$
        und somit Impedanz der Induktivit\"at (gem\"ass
        $Z_L = j \omega L$).
    \item[\textbf{Kapazit\"at des Solarmoduls:}]
        Dem  Solarmodul   wird  bei   diesem  Vorgehen  das   Verhalten  einer
        Wechselstromquelle   aufgezwungen. Besitzt  es   interne  parasit\"are
        Kapazit\"aten,  k\"onnen  diese  bei  den  abrupten  \"Anderungen  der
        Spannung hohe Str\"ome im  kurzgeschlossenen Pfad und seinen Bauteilen
        verursachen.\footnotemark
        \footnotetext{%
            Strom\"anderung in Abh\"angigkeit der Spannungs\"anderung:
            $I(t) = C \cdot \frac{\mathrm{V(t)}}{\mathrm{d}t}$%
        }

        Besitzen    diese   Bauteile    Ohm'sche   Widerst\"ande,    entstehen
        entsprechende thermische  Verluste, welche die  Bauteile besch\"adigen
        k\"onnen.
\end{symbols}

Die    Tr\"agerfrequenz    in    den    folgenden    Simulationen    betr\"agt
\SI{10}{\kilo\hertz}.


% ---------------------------------------------------------------------------- %
\subsection{Sender}
\label{subsec:simu:ask:sensor}
% ---------------------------------------------------------------------------- %

Das  gesteuerte Kurzschliessen  des Moduls  wird mit  einem MOSFET  umgesetzt,
welcher zwischen  Eingang und  Ausgang des Moduls  durchschalten kann  und vom
Microcontroller auf dem Sensor gesteuert wird. \fref{fig:module:mosfet:simple}
zeigt diesen Aufbau schematisch.

Die  Ansteuerung des  Transistors  erfolgt mit  \SI{3.3}{\volt},  da dies  die
maximale Spannung  ist, welche der  auf dem Sensor  platzierte Microcontroller
ausgeben kann.

\begin{figure}[h!tb]
    \centering
    \input{images/circuits/moduleMOSFET.tex}
    \caption{%
        Gesteuerter     Kurzschluss     eines    Solarmoduls     mit     einem
        microcontroller-gesteuerten       Transistor. Die      vollst\"andigen
        \code{LTspice}-Schaltungen  sind  in Anhang  \ref{app:simu:module}  ab
        Seite \pageref{app:simu:module} dokumentiert.%
    }
    \label{fig:module:mosfet:simple}
\end{figure}

%TODO: line width
\begin{figure}
    \begin{tikzpicture}
       \begin{scope}[x={(0mm,0mm)},y={(120mm,\textwidth)}]
           \begin{axis}[%
                   height=40mm,
                   width=\textwidth,
                   at={(0,70mm)},
                   grid=both,
                   xlabel=Zeit (\si{\micro\second}),
                   ylabel=Strom (\si{\ampere}),
                   %x unit=u,
                   change x base=true,
                   %line width = 1pt,
                   thick,
                   x SI prefix=micro,
               ]
               \addplot[-,color=blue] table {data/module-72cells--I-MOSFET--0005u.dat};
           \end{axis}
           \begin{axis}[%
                   height=40mm,
                   width=\textwidth,
                   at={(0,35mm)},
                   grid=both,
                   xlabel=Zeit (\si{\micro\second}),
                   ylabel=Spannung (\si{\volt}),
                   %x unit=u,
                   change x base=true,
                   x SI prefix=micro,
               ]
               \addplot[-,color=magenta] table {data/module-72cells--U-MOSFET--0005u.dat};
           \end{axis}
           \begin{axis}[%
                   height=40mm,
                   width=\textwidth,
                   at={(0,0)},
                   grid=both,
                   xlabel=Zeit (\si{\micro\second}),
                   ylabel=Leistung (\si{\watt}),
                   %x unit=u,
                   change x base=true,
                   x SI prefix=micro,
               ]
               \addplot[-,color=red] table {data/module-72cells--P-MOSFET--0005u.dat};
           \end{axis}
       \end{scope}
   \end{tikzpicture}
   \caption{%
       Verlauf    von    Strom,    Spannung    und    Leistung    am    MOSFET
       bei   einer   Schaltfrequenz   von   \SI{10}{\kilo\hertz}   bei   einer
       Modulkonfiguration    von    $36     \times    2$    Zellen    gem\"ass
       Schema    in    \fref{fig:ltspice:module:cellBased:36x2}   auf    Seite
       \ref{fig:ltspice:module:cellBased:36x2}.\protect\\
       Anhang       \ref{app:sec:simu:complementary:36x2}      auf       Seite
       \pageref{app:sec:simu:complementary:36x2} beinhaltet zum Vergleich noch
       Simulationen f\"ur den Zeitraum von einer Millisekunde.%
   }
   \label{fig:simu:results:36x2:3u}
\end{figure}

\begin{figure}
    \begin{tikzpicture}
       \begin{scope}[x={(0mm,0mm)},y={(120mm,\textwidth)}]
           \begin{axis}[%
                   height=40mm,
                   width=\textwidth,
                   at={(0,70mm)},
                   grid=both,
                   xlabel=Zeit (\si{\micro\second}),
                   ylabel=Strom (\si{\ampere}),
                   %x unit=u,
                   change x base=true,
                   x SI prefix=micro,
               ]
               \addplot[-,color=blue] table {data/module-72cells-series--I-MOSFET--0003u.dat};
           \end{axis}
           \begin{axis}[%
                   height=40mm,
                   width=\textwidth,
                   at={(0,35mm)},
                   grid=both,
                   xlabel=Zeit (\si{\micro\second}),
                   ylabel=Spannung (\si{\volt}),
                   %x unit=u,
                   change x base=true,
                   x SI prefix=micro,
               ]
               \addplot[-,color=magenta] table {data/module-72cells-series--U-MOSFET--0003u.dat};
           \end{axis}
           \begin{axis}[%
                   height=40mm,
                   width=\textwidth,
                   at={(0,0)},
                   grid=both,
                   xlabel=Zeit (\si{\micro\second}),
                   ylabel=Leistung (\si{\watt}),
                   %x unit=u,
                   change x base=true,
                   x SI prefix=micro,
               ]
               \addplot[-,color=red] table {data/module-72cells-series--P-MOSFET--0003u.dat};
           \end{axis}
       \end{scope}
   \end{tikzpicture}
   \caption{%
       Verlauf    von    Strom,    Spannung    und    Leistung    am    MOSFET
       bei   einer   Schaltfrequenz   von   \SI{10}{\kilo\hertz}   bei   einer
       Modulkonfiguration    von    $72     \times    1$    Zellen    gem\"ass
       Schema    in    \fref{fig:ltspice:module:cellBased:36x2}   auf    Seite
       \ref{fig:ltspice:module:cellBased:72x1}. \protect\\
       Anhang     \ref{app:sec:simu:complementary:72x1}     auf     Seite
       \pageref{app:sec:simu:complementary:72x1} beinhaltet zum Vergleich noch
       Simulationen f\"ur den Zeitraum von einer Millisekunde.%
   }
   \label{fig:simu:results:72x1:3u}
\end{figure}

Die    Resultate   der    Simulation   f\"ur    ein   $36    \times   2$-Modul
sind   in   \fref{fig:simu:results:36x2:3u}   f\"ur  einen   Zeitbereich   von
\SI{3}{\micro\second}  dargestellt,  die  Ergebnisse   f\"ur  das  $72  \times
1$-Modul in \fref{fig:simu:results:72x1:3u}.  Tabelle \ref{tab:36x2:72x1:heat}
fasst   die  wichtigsten   Eckdaten  der   Simulationen  zusammen,   inklusive
Durchschnittswerte f\"ur Strom und Leistung.

\begin{table}[h!tb]
    \centering
    \caption{%
        Eckdaten zur Simulation des Kurzschlussverfahrens f\"ur ein Solarpanel
        mit  $36   \times  2$  Zellen  und   ein  Panel  mit  $72   \times  1$
        Zellen.\protect\\
        Bei     den     Durchschnittswerten     sind     sowohl     Ergebnisse
        f\"ur      \SI{1}{\milli\second}     wie      auch     \SI{1}{\second}
        angegeben,    um   zu    zeigen,   dass    sich   die    Konfiguration
        bereits    bei    einer    Millisekunde   stabilisiert    hat    (auch
        zu     sehen    in     Anhang    \ref{app:sec:simu:complementary:36x2}
        auf      Seite      \pageref{app:sec:simu:complementary:36x2}      und
        Anhang      \ref{app:sec:simu:complementary:72x1}       auf      Seite
        \pageref{app:sec:simu:complementary:72x1}).\protect\\
        Die     Dauer      der     Spitze     ist     beim      $36     \times
        2$-Modul     \SI{2}{\micro\second}    und     \SI{1.78}{\micro\second}
        beim    $72    \times    1$-Modul    (siehe    unterste    Plots    in
        den     Abbildungen      \ref{fig:simu:results:36x2:3u}     respektive
        \ref{fig:simu:results:72x1:3u}).%
    }
    \label{tab:36x2:72x1:heat}
    \begin{tabular}{lrr}

    \toprule
    Kriterium                                      & $36 \times 2$-Modul & $72 \times 1$-Modul \\
    \midrule
     Spitzenwert Strom:                            & \SI{32}{\ampere}    & \SI{24}{\ampere}    \\
     Spitzenwert Leistung:                         & \SI{310}{\watt}     & \SI{535}{\watt}     \\
     $\overline{P}$ f\"ur Dauer der Spitze         & \SI{158.77}{\watt}  & \SI{267.46}{\watt}  \\
     $\overline{P}$ f\"ur \SI{1}{\milli\second}    & \SI{4.312}{\watt}   & \SI{6.0577}{\watt}  \\
     $\overline{P}$ f\"ur \SI{1}{\second}          & \SI{4.3047}{\watt}  & \SI{6.0433}{\watt}  \\
    \bottomrule
    \end{tabular}
\end{table}

Aus \fref{fig:simu:results:36x2:5u}  und \tref{tab:36x2:72x1:heat}  ziehen wir
folgende Schlussfolgerungen:

\begin{enumerate}
    \firmlist
    \item
        Der  Spitzenwert f\"ur  den  Strom ist  hoch,  aber Transistoren,  die
        solche Str\"ome  verkraften k\"onnen,  sind zu  vern\"unftigen Preisen
        erh\"altlich.
    \item
        Die    Spitzenwerte    der    Leistungen   zwar    nur    sehr    kurz
        (etwa   \SI{2}{\micro\second}),   aber   sehr  hoch. Auch   wenn   der
        Durchschnittliche Leistungswert  weit unter  der Grenze  von g\"unstig
        erh\"altlichen  MOSFETs   liegt,  k\"onnte  die   Leistungsspitze  den
        Transistor irreversibel sch\"adigen.
    \item
        Der  durchschnittliche  Leistungsverbrauch  ist  weit  \"uber  dem  im
        Pflichtenheft angestrebten Wert von \SI{100}{\milli\watt}.
\end{enumerate}
\todo{korrekte Schlussfolgerungen?}


% ---------------------------------------------------------------------------- %
\clearpage
\subsection{\Master (Empf\"anger)}
\label{subsec:simu:ask:recv}
% ---------------------------------------------------------------------------- %


% ---------------------------------------------------------------------------- %
\subsection{Gesamtsystem}
\label{subsec:simu:ask:total}
% ---------------------------------------------------------------------------- %
